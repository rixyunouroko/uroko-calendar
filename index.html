<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>Uroko Calendar</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- iOS のホーム画面に追加したとき用 -->
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="default" />
  <!-- ここはあとでケツァルさんアイコンに差し替えればOK -->
  <link
    rel="icon"
    href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect width='100' height='100' rx='24' ry='24' fill='%23f3d7a0'/%3E%3Ctext x='50' y='58' text-anchor='middle' font-size='40'%3EU%3C/text%3E%3C/svg%3E"
  />

  <style>
    :root {
      --bg: #f7ebda;
      --card: #ffffff;
      --accent: #d7a95c;
      --accent-soft: #f3d7a0;
      --text-main: #3c2815;
      --text-sub: #7a6a55;
      --shadow-soft: 0 8px 18px rgba(0, 0, 0, 0.08);
      --radius-card: 20px;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      padding: 0 0 40px;
      font-family: -apple-system, BlinkMacSystemFont,
        "Hiragino Maru Gothic ProN", "Yu Gothic", "YuGothic", "Noto Sans JP",
        system-ui, sans-serif;
      color: var(--text-main);
      background-color: var(--bg);
      background-image:
        linear-gradient(rgba(255, 255, 255, 0.3) 1px, transparent 1px),
        linear-gradient(90deg, rgba(255, 255, 255, 0.3) 1px, transparent 1px);
      background-size: 32px 32px;
      background-position: 0 16px;
    }

    header {
      text-align: center;
      padding: 24px 16px 12px;
    }

    h1 {
      margin: 0;
      font-size: 26px;
      letter-spacing: 0.08em;
    }

    .date {
      margin-top: 8px;
      font-size: 14px;
      color: var(--text-sub);
    }

    main {
      max-width: 720px;
      margin: 0 auto;
      padding: 0 16px 24px;
    }

    .pill-row {
      display: flex;
      justify-content: center;
      gap: 8px;
      margin-bottom: 10px;
      flex-wrap: wrap;
    }

    .pill {
      padding: 4px 10px;
      border-radius: 999px;
      background: rgba(0, 0, 0, 0.04);
      font-size: 11px;
      color: var(--text-sub);
    }

    .card {
      background: var(--card);
      border-radius: var(--radius-card);
      padding: 16px 18px 18px;
      margin-bottom: 16px;
      box-shadow: var(--shadow-soft);
      border: 1px solid rgba(0, 0, 0, 0.02);
    }

    .card-header {
      display: flex;
      align-items: baseline;
      justify-content: space-between;
      margin-bottom: 8px;
      gap: 8px;
    }

    .card-title {
      font-size: 15px;
      font-weight: 600;
      letter-spacing: 0.08em;
    }

    .badge {
      font-size: 11px;
      padding: 3px 8px;
      border-radius: 999px;
      background: var(--accent-soft);
      color: #624013;
      white-space: nowrap;
    }

    .day-line {
      margin-bottom: 6px;
      font-size: 15px;
      font-weight: 600;
    }

    .day-line span.label {
      font-size: 12px;
      font-weight: 500;
      color: var(--text-sub);
      margin-right: 6px;
    }

    .tone-sign {
      font-size: 13px;
      color: var(--text-sub);
      margin-bottom: 8px;
    }

    .tone-sign span {
      margin-right: 10px;
    }

    .tone-sign strong {
      font-weight: 600;
      color: var(--text-main);
    }

    .body-text {
      font-size: 13px;
      line-height: 1.6;
      margin-bottom: 4px;
      white-space: pre-line;
    }

    .hint {
      font-size: 11px;
      color: var(--text-sub);
      margin-top: 6px;
    }

    .section-title {
      font-weight: 600;
      margin-bottom: 6px;
      font-size: 15px;
    }

    .footer-note {
      margin-top: 18px;
      text-align: center;
      font-size: 10px;
      color: var(--text-sub);
      line-height: 1.6;
    }

    /* 誕生日フォーム */

    .birth-row {
      display: flex;
      gap: 6px;
      align-items: center;
      margin: 8px 0 10px;
      flex-wrap: wrap;
    }

    .birth-row label {
      font-size: 13px;
    }

    .birth-input {
      width: 70px;
      padding: 4px 6px;
      border-radius: 999px;
      border: 1px solid rgba(0, 0, 0, 0.15);
      font-size: 13px;
      text-align: center;
      background: #fffdf8;
    }

    .birth-input::placeholder {
      color: #c0b19a;
    }

    .birth-button {
      padding: 5px 14px;
      border-radius: 999px;
      border: none;
      background: var(--accent);
      color: #fff;
      font-size: 13px;
      cursor: pointer;
    }

    .birth-button:active {
      opacity: 0.85;
    }

    .birth-badge-row {
      display: flex;
      justify-content: flex-end;
      margin-bottom: 4px;
    }

    @media (min-width: 640px) {
      h1 {
        font-size: 28px;
      }

      .card {
        padding: 20px 22px 22px;
      }

      .day-line {
        font-size: 16px;
      }

      .body-text {
        font-size: 13.5px;
      }
    }
  </style>
</head>
<body>
  <header>
    <h1>Uroko Calendar</h1>
    <div class="date" id="todayLabel"></div>
  </header>

  <main>
    <div class="pill-row">
      <div class="pill" id="kinLabel"></div>
      <div class="pill" id="wavespellLabel"></div>
    </div>

    <!-- 今日の表 -->
    <section class="card">
      <div class="card-header">
        <div class="card-title">今日の表</div>
        <div class="badge">表で動きやすいテーマ</div>
      </div>
      <div class="day-line">
        <span class="label">きょうは</span>
        <span id="frontDayName"></span>
      </div>
      <div class="tone-sign" id="frontToneSign"></div>
      <div class="body-text" id="frontText"></div>
      <div class="hint" id="frontHint"></div>
    </section>

    <!-- 今日の裏 -->
    <section class="card">
      <div class="card-header">
        <div class="card-title">今日の裏</div>
        <div class="badge">本能・影で動きやすいところ</div>
      </div>
      <div class="day-line">
        <span class="label">うら側では</span>
        <span id="backDayName"></span>
      </div>
      <div class="tone-sign" id="backToneSign"></div>
      <div class="body-text" id="backText"></div>
      <div class="hint" id="backHint"></div>
    </section>

    <!-- 13日間の周期 -->
    <section class="card">
      <div class="card-header">
        <div class="card-title">いま流れている13日間</div>
        <div class="badge">ウェイブスペル</div>
      </div>
      <div class="day-line" id="waveTitle"></div>
      <div class="tone-sign" id="waveRange"></div>
      <div class="body-text" id="waveText"></div>
      <div class="hint" id="waveHint"></div>
    </section>

    <!-- 音＆紋章のざっくり説明 -->
    <section class="card">
      <div class="card-header">
        <div class="card-title">音と紋章ってなに？</div>
        <div class="badge">マヤ暦の基本</div>
      </div>
      <div class="body-text">
        マヤ暦（ツォルキン）は「13の音 × 20の紋章」で260日をくり返す暦やで。<br /><br />
        ● 音 … その日の「リズム」や「進み具合」。1〜13まであって、はじまり／調整／手放し…みたいな流れがくり返される。<br />
        ● 紋章 … その日の「テーマ」や「キャラ」。ワニ・風・夜・トカゲ…みたいに20種類あって、それぞれ得意分野とクセがある。<br /><br />
        このアプリでは「表＝意識しやすい動き」「裏＝本能や影で出やすい動き」として、同じ日を両側からメモしてる感じやと思ってくれたらOK。<br /><br />
        ※ 流派によって起点や呼び方が違うこともあるから、ほかのサイトと結果がズレる場合もあるで。これは「ウロコ版クラシック」として使ってな。
      </div>
    </section>

    <!-- 誕生日検索 -->
    <section class="card">
      <div class="card-header">
        <div class="card-title">あなたのマヤ暦をしらべる</div>
        <div class="badge">誕生日検索</div>
      </div>

      <div class="body-text">
        西暦の誕生日を入れると、「音」と「紋章」と、そのざっくりした性質メモが出てくるよ。
      </div>

      <div class="birth-row">
        <label for="birthYear">誕生日：</label>
        <input
          id="birthYear"
          class="birth-input"
          type="number"
          placeholder="1990"
          inputmode="numeric"
        />
        <span>年</span>
        <input
          id="birthMonth"
          class="birth-input"
          type="number"
          placeholder="1"
          inputmode="numeric"
        />
        <span>月</span>
        <input
          id="birthDay"
          class="birth-input"
          type="number"
          placeholder="1"
          inputmode="numeric"
        />
        <span>日</span>
        <button class="birth-button" onclick="searchBirth()">検索</button>
      </div>

      <div class="hint">
        例：1990 / 1 / 1 みたいに入れてね。
      </div>

      <div id="birthResult" class="body-text" style="margin-top: 10px;">
        まだ誕生日は入ってへんで。上に生年月日を入れて「検索」を押してな。
      </div>
    </section>

    <div class="footer-note">
      ※ しらの専用マヤ暦メモアプリ（試作版）<br />
      日付をもとに、「表と裏のメモ」と「誕生日の傾向」をベオが自動で出しています。
    </div>
  </main>

  <script>
    // 20の紋章
    const box.innerHTML =
        `【${formatDateJa(date)} 生まれのメモ】\n\n` +
        `◎ あなたの紋章：${sign.nameJa}（${sign.nameAlt}）\n` +
        `◎ あなたの音：音${tone.num}（${tone.keyword}）\n\n` +
        `◎ 紋章のテーマ\n` +
        `${sign.frontKeyword}\n\n` +
        `◎ 表の性質（表で出やすいところ）\n` +
        `${sign.frontText}\n\n` +
        `◎ 裏の性質（本能・影で出やすいところ）\n` +
        `${sign.backText}\n\n` +
        `◎ あなたの音のクセ\n` +
        `【音${tone.num}の流れ】${tone.front}\n` +
        `【つまずきポイント】${tone.back}\n\n` +
        `※ この結果はウロコ版のツォルキン計算やで。他のサイトと違うこともあるけど、こっちはこっちで一貫してると思って使ってな。`;
    }

      
    