<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Uroko Calendar</title>

<style>
body {
  font-family: "Hiragino Sans", "Noto Sans JP", sans-serif;
  background: #f5f0e6;
  margin: 0;
  padding: 0;
}

#app {
  max-width: 900px;
  margin: auto;
  padding: 20px;
}

.title {
  text-align: center;
  font-size: 2rem;
  font-weight: bold;
  margin-bottom: 4px;
}

.subtitle {
  text-align: center;
  font-size: 1.1rem;
  color: #555;
  margin-bottom: 20px;
}

.section {
  background: #fff;
  padding: 20px;
  border-radius: 16px;
  margin-bottom: 20px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.05);
}

.section h2 {
  font-size: 1.2rem;
  margin-bottom: 10px;
}

.tag {
  display: inline-block;
  font-size: 0.75rem;
  background: #efe1c7;
  color: #6b5a3c;
  padding: 4px 10px;
  border-radius: 999px;
  margin-bottom: 10px;
}

.block {
  margin-top: 12px;
}

.block h3 {
  font-size: 0.95rem;
  color: #6b5a3c;
  margin-bottom: 4px;
}

.card {
  background: #fffaf0;
  padding: 14px;
  border-radius: 12px;
  line-height: 1.7;
}

.card.back {
  background: #ffecec;
}

.wave {
  background: #f0f6ff;
}

#birthdayResult {
  margin-top: 15px;
  background: #fffceb;
  padding: 15px;
  border-radius: 12px;
  line-height: 1.7;
}
</style>
</head>

<body>
<div id="app">

<h1 class="title">Uroko Calendar</h1>
<p class="subtitle" id="todayDate"></p>

<!-- ツォルキン暦 -->
<div class="section">
  <h2>ツォルキン暦</h2>
  <span class="tag">260日暦</span>

  <div class="block">
    <h3>今日のテーマ（表）</h3>
    <div class="card" id="tFront"></div>
  </div>

  <div class="block">
    <h3>本能・無意識（裏）</h3>
    <div class="card back" id="tBack"></div>
  </div>

  <div class="block">
    <h3>この13日間のテーマ（ウェイブスペル）</h3>
    <div class="card wave" id="tWave"></div>
    <p id="tWaveInfo"></p>
  </div>
</div>

<!-- ウロコ暦 -->
<div class="section">
  <h2>ウロコ暦</h2>
  <span class="tag">しらの流</span>

  <div class="block">
    <h3>今日のテーマ（表）</h3>
    <div class="card" id="uFront"></div>
  </div>

  <div class="block">
    <h3>本能・影（裏）</h3>
    <div class="card back" id="uBack"></div>
  </div>
</div>

<!-- 解説 -->
<div class="section">
  <h2>音・紋章・ツォルキン暦とは</h2>
  <p>
    マヤ暦（ツォルキン）は「13の音 × 20の紋章」で260日を巡る暦です。<br>
    音はその日のリズム、紋章はテーマや性質を表します。
  </p>
  <p>
    表は「外で動きやすい流れ」、<br>
    裏は「本能や無意識で出やすい動き」。
  </p>
  <p>
    両方あわせて読むことで、その日の全体像が見えてきます。
  </p>
</div>

<!-- 誕生日検索 -->
<div class="section">
  <h2>誕生日から調べる（ツォルキン）</h2>
  <input type="date" id="bInput">
  <button onclick="searchBirthday()">検索</button>
  <div id="birthdayResult"></div>
</div>

</div>

<script>
/* ===== 基本データ ===== */
const glyphNames = [
  "ワニ","風","夜","トカゲ","蛇","死","シカ","ウサギ","水","犬",
  "猿","道","コーン","ジャガー","ワシ","コンドル","香","ナイフ","嵐","祖先"
];

const toneNames = [
  "音1","音2","音3","音4","音5","音6","音7",
  "音8","音9","音10","音11","音12","音13"
];

/* ===== 起点 ===== */
// ツォルキン（一般）
const t_startDate  = new Date("1987-05-14");
const t_startTone  = 11;
const t_startGlyph = 7;

// ウロコ暦（しらの流）
const u_startDate  = new Date("2025-09-02");
const u_startTone  = 1;
const u_startGlyph = 3; // 夜

/* ===== サイクル計算 ===== */
function calcCycle(date, startDate, startTone, startGlyph) {
  const diff = Math.floor((date - startDate) / 86400000);
  const day = (diff % 260 + 260) % 260;
  return {
    tone: ((startTone - 1 + day) % 13) + 1,
    glyph: ((startGlyph - 1 + day) % 20) + 1,
    cycleDay: (day % 13) + 1,
    waveStart: new Date(date.getTime() - ((day % 13) * 86400000))
  };
}

/* ===== 表示更新 ===== */
function updateToday() {
  const today = new Date();
  document.getElementById("todayDate").textContent =
    today.toLocaleDateString("ja-JP", { year:"numeric", month:"long", day:"numeric" });

  const t = calcCycle(today, t_startDate, t_startTone, t_startGlyph);
  const u = calcCycle(today, u_startDate, u_startTone, u_startGlyph);

  document.getElementById("tFront").textContent =
    `${toneNames[t.tone-1]}・${glyphNames[t.glyph-1]}`;
  document.getElementById("tBack").textContent =
    `本能に${glyphNames[t.glyph-1]}が出やすい`;

  document.getElementById("tWave").textContent =
    `${glyphNames[t.glyph-1]}の13日間`;
  document.getElementById("tWaveInfo").textContent =
    `今日は ${t.cycleDay} / 13 日目`;

  document.getElementById("uFront").textContent =
    `音${u.tone}・${glyphNames[u.glyph-1]}`;
  document.getElementById("uBack").textContent =
    `ウロコ的${glyphNames[u.glyph-1]}`;
}

/* ===== 誕生日検索 ===== */
function searchBirthday() {
  const input = document.getElementById("bInput").value;
  if (!input) return;
  const d = calcCycle(new Date(input), t_startDate, t_startTone, t_startGlyph);
  document.getElementById("birthdayResult").innerHTML =
    `あなたは <b>${toneNames[d.tone-1]}・${glyphNames[d.glyph-1]}</b> 生まれ`;
}

document.addEventListener("DOMContentLoaded", updateToday);
</script>
</body>
</html>