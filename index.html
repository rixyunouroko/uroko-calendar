<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>Uroko Calendar</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- iOSでホーム画面アイコンっぽくするやつ -->
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="default" />

  <!-- ★ここをケツァルさんアイコンに変更（ファイル名はリポジトリに入れたPNGに合わせてね） -->
  <link rel="icon" type="image/png" href="uroko-calendar-icon.png" />
  <link rel="apple-touch-icon" href="uroko-calendar-icon.png" />

  <style>
    :root {
      --bg: #fff6e9;
      --card: #ffffff;
      --accent: #e1b76a;
      --accent-soft: #f5d7a5;
      --text-main: #3a2a1a;
      --text-sub: #7a6a55;
      --shadow-soft: 0 8px 18px rgba(0, 0, 0, 0.08);
      --radius-card: 20px;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      padding: 0 0 40px;
      font-family: -apple-system, BlinkMacSystemFont,
        "Hiragino Maru Gothic ProN", "Yu Gothic", "YuGothic", "Noto Sans JP",
        system-ui, sans-serif;
      background: radial-gradient(circle at top, #fffaf0 0, var(--bg) 55%);
      color: var(--text-main);
    }

    header {
      text-align: center;
      padding: 24px 16px 12px;
    }

    h1 {
      margin: 0;
      font-size: 24px;
      letter-spacing: 0.08em;
    }

    .date {
      margin-top: 8px;
      font-size: 14px;
      color: var(--text-sub);
    }

    main {
      max-width: 720px;
      margin: 0 auto;
      padding: 0 16px 24px;
    }

    .pill-row {
      display: flex;
      justify-content: center;
      gap: 8px;
      margin-bottom: 10px;
      flex-wrap: wrap;
    }

    .pill {
      padding: 4px 10px;
      border-radius: 999px;
      background: rgba(0, 0, 0, 0.04);
      font-size: 11px;
      color: var(--text-sub);
    }

    .card {
      background: var(--card);
      border-radius: var(--radius-card);
      padding: 16px 18px 18px;
      margin-bottom: 16px;
      box-shadow: var(--shadow-soft);
      border: 1px solid rgba(0, 0, 0, 0.02);
    }

    .card-header {
      display: flex;
      align-items: baseline;
      justify-content: space-between;
      margin-bottom: 8px;
    }

    .card-title {
      font-size: 15px;
      font-weight: 600;
      letter-spacing: 0.08em;
    }

    .badge {
      font-size: 11px;
      padding: 3px 8px;
      border-radius: 999px;
      background: var(--accent-soft);
      color: #624013;
      white-space: nowrap;
    }

    .day-line {
      margin-bottom: 6px;
      font-size: 15px;
      font-weight: 600;
    }

    .day-line span.label {
      font-size: 12px;
      font-weight: 500;
      color: var(--text-sub);
      margin-right: 6px;
    }

    .tone-sign {
      font-size: 13px;
      color: var(--text-sub);
      margin-bottom: 8px;
    }

    .tone-sign span {
      margin-right: 10px;
    }

    .tone-sign strong {
      font-weight: 600;
      color: var(--text-main);
    }

    .body-text {
      font-size: 13px;
      line-height: 1.6;
      margin-bottom: 4px;
      white-space: pre-line;
    }

    .hint {
      font-size: 11px;
      color: var(--text-sub);
      margin-top: 6px;
    }

    .footer-note {
      margin-top: 18px;
      text-align: center;
      font-size: 10px;
      color: var(--text-sub);
      line-height: 1.6;
    }

    /* ▼ マヤ暦検索用の追加スタイル */
    .birth-row {
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      gap: 8px;
      margin-bottom: 6px;
    }

    .birth-row label {
      font-size: 13px;
      color: var(--text-main);
    }

    input[type="date"] {
      font-size: 13px;
      padding: 4px 8px;
      border-radius: 999px;
      border: 1px solid rgba(0, 0, 0, 0.15);
      background: #fff;
      color: var(--text-main);
    }

    .primary-btn {
      padding: 4px 12px;
      border-radius: 999px;
      border: none;
      font-size: 12px;
      background: var(--accent);
      color: #fff;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.15);
    }

    .primary-btn:active {
      transform: translateY(1px);
      box-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
    }

    @media (min-width: 640px) {
      h1 {
        font-size: 28px;
      }

      .card {
        padding: 20px 22px 22px;
      }

      .day-line {
        font-size: 16px;
      }

      .body-text {
        font-size: 13.5px;
      }
    }
  </style>
</head>
<body>
  <header>
    <h1>Uroko Calendar</h1>
    <div class="date" id="todayLabel"></div>
  </header>

  <main>
    <div class="pill-row">
      <div class="pill" id="kinLabel"></div>
      <div class="pill" id="wavespellLabel"></div>
    </div>

    <!-- 表（人側） -->
    <section class="card">
      <div class="card-header">
        <div class="card-title">今日の表（人側）</div>
        <div class="badge">自分の動きやすさ</div>
      </div>
      <div class="day-line" id="frontTitle">
        <span class="label">きょうは</span>
        <span id="frontDayName"></span>
      </div>
      <div class="tone-sign" id="frontToneSign"></div>
      <div class="body-text" id="frontText"></div>
      <div class="hint" id="frontHint"></div>
    </section>

    <!-- 裏（神側） -->
    <section class="card">
      <div class="card-header">
        <div class="card-title">今日の裏（神側）</div>
        <div class="badge">本能・影で動くところ</div>
      </div>
      <div class="day-line" id="backTitle">
        <span class="label">うら側では</span>
        <span id="backDayName"></span>
      </div>
      <div class="tone-sign" id="backToneSign"></div>
      <div class="body-text" id="backText"></div>
      <div class="hint" id="backHint"></div>
    </section>

    <!-- 13日間の周期 -->
    <section class="card">
      <div class="card-header">
        <div class="card-title">いま流れている13日間</div>
        <div class="badge">ウェイブスペル</div>
      </div>
      <div class="day-line" id="waveTitle"></div>
      <div class="tone-sign" id="waveRange"></div>
      <div class="body-text" id="waveText"></div>
      <div class="hint" id="waveHint"></div>
    </section>

    <!-- ★音と紋章ってなに？（短い説明） -->
    <section class="card">
      <div class="card-header">
        <div class="card-title">音と紋章ってなに？</div>
        <div class="badge">マヤ暦の基本</div>
      </div>
      <div class="body-text">
        マヤ暦（ツォルキン）は「13の音 × 20の紋章」で260日をくり返す暦です。音はその日のリズムや動き方、紋章はその日のテーマや性質を表します。
      </div>
      <div class="body-text">
        上の2つのカードは、表が「外側で動きやすい流れ」、裏が「本能や無意識で出やすい動き」として読めます。どちらも合わせて、その日の全体像として使ってください。
      </div>
    </section>

    <!-- ★あなたのマヤ暦検索 -->
    <section class="card">
      <div class="card-header">
        <div class="card-title">あなたのマヤ暦を調べる</div>
        <div class="badge">誕生日からチェック</div>
      </div>
      <div class="body-text">
        <div class="birth-row">
          <label for="birthInput">誕生日：</label>
          <input type="date" id="birthInput" />
          <button type="button" class="primary-btn" onclick="handleBirthSearch()">検索</button>
        </div>
        <p class="hint">※ ツォルキンの260日サイクルで「音」と「紋章」の組み合わせを表示します。</p>
      </div>
      <div class="body-text" id="birthResultIntro"></div>
      <div class="body-text" id="birthResultMain"></div>
      <div class="hint" id="birthResultHint"></div>
    </section>

    <div class="footer-note">
      ※ しらの専用マヤ暦メモアプリ（試作版）<br />
      日付をもとに、音と紋章からベオが自動でメモを生成しています。
    </div>
  </main>

  <script>
    // 20の紋章（Yucatec系）順番：ワニ〜祖先
    const daySigns = [
      {
        key: "crocodile",
        nameJa: "ワニ",
        nameAlt: "Imix",
        frontKeyword: "はじまり／生命力／土台づくり",
        frontText:
          "新しいことをスタートするのにぴったりの日。結果よりも「芽」を出すイメージで、小さな一歩を踏み出すと吉。暮らしの基盤を整える整理整頓も◎。",
        backText:
          "甘えや依存が強く出やすいタイミング。「どうせ守ってもらえない」と拗ねモードにもなりがち。境界線を意識して、頼ることと丸投げを分けるとバランス◎。",
        waveTheme:
          "自分の『基地』を整えながら、新しいサイクルを立ち上げる13日間。生活リズム・部屋・仕事のやり方など、土台のリニューアルに向く。"
      },
      {
        key: "wind",
        nameJa: "風",
        nameAlt: "Ik",
        frontKeyword: "コミュニケーション／言葉／呼吸",
        frontText:
          "会話・SNS・文章など『言葉』がカギの日。伝える・相談する・告知することに追い風。深呼吸を意識して、頭と心の風通しをよくしておこう。",
        backText:
          "つい言いすぎたり、言葉がトゲトゲしくなりやすい。本音を誤魔化して軽口で逃げるパターンも。早口になったら一度黙って呼吸リセット。",
        waveTheme:
          "言葉と呼吸を整え、自分の世界の空気を入れ替える13日間。告知・交渉・発信を少しずつ増やしていくと実になりやすい。"
      },
      {
        key: "night",
        nameJa: "夜",
        nameAlt: "Akbal",
        frontKeyword: "内面／夢／インナーワールド",
        frontText:
          "一人時間や内省がしやすい日。夢・イメージ・直感が濃くなりやすいので、メモ帳をそばに置いておくと◎。外よりも『自分の中』を掘ると発見がある。",
        backText:
          "不安妄想も増えやすい。『どうせダメ』と決めつけて動かないパターンに注意。暗くなりすぎたら、暖かい飲み物と柔らかい光で感覚から安心を作ろう。",
        waveTheme:
          "内面を整理して、見えない世界からヒントを受け取る13日間。夢日記やメモ書きで、頭の中を外に出してあげるとスッキリ。"
      },
      {
        key: "lizard",
        nameJa: "トカゲ",
        nameAlt: "Kan",
        frontKeyword: "才能／種／欲望",
        frontText:
          "眠っていた才能や『やりたい欲』がムクムクしやすい日。小さな種レベルのアイデアでもメモしておくと後で効いてくる。体の感覚（食欲・性欲）も素直になりやすい。",
        backText:
          "欲望と不安がセットで出やすい。『欲しいけど怖い』で自分を責めないこと。まずは少量試す・情報を集めるなど、欲を0か100で判断しない工夫を。",
        waveTheme:
          "才能と欲望の『種』を観察し、どれを育てるか選んでいく13日間。やりたいことリストを作るのに向くタイミング。"
      },
      {
        key: "serpent",
        nameJa: "蛇",
        nameAlt: "Chicchan",
        frontKeyword: "生命エネルギー／カラダ／情熱",
        frontText:
          "体の感覚が鋭くなる日。ストレッチ・マッサージ・入浴など『肉体のメンテナンス』に最適。情熱スイッチも入りやすいので、集中作業にも向く。",
        backText:
          "ムラムラ・イライラなど、強い感情が出やすい。本能を抑え込みすぎると反動が出るので、安全な形で発散を。運動・歌う・踊るなど『動いて抜く』と良い。",
        waveTheme:
          "体と情熱をチューニングする13日間。生活リズム・食事・睡眠を整えると、後半に効いてくる。"
      },
      {
        key: "death",
        nameJa: "死",
        nameAlt: "Cimi",
        frontKeyword: "手放し／区切り／入れ替え",
        frontText:
          "『そろそろ終わりでいいもの』に区切りをつけるタイミング。契約・習慣・物・人間関係など、感謝して手放すと、新しいスペースが空く日。",
        backText:
          "全部を一気に切り捨てたくなる極端モード注意。感情的になってからの決断は保留し、『今日は候補をメモするだけ』でも十分。",
        waveTheme:
          "古いものを脱ぎ捨てて、次のステージの準備をする13日間。大掃除・断捨離・解約など、軽くなる選択が◎。"
      },
      {
        key: "deer",
        nameJa: "シカ",
        nameAlt: "Manik",
        frontKeyword: "献身／手仕事／整える",
        frontText:
          "コツコツ作業や、誰かのためのサポートがはかどる日。手を動かすと心も整いやすい。『自分のペース』を守りながら働く意識を。",
        backText:
          "頑張りすぎて燃え尽きやすい。義務感で自分を追い込みやすいので、『今日はここまで』ラインを先に決めておくと安全。肩・腰のケアも忘れずに。",
        waveTheme:
          "働き方と献身のバランスを整える13日間。無理な奉仕を減らし、『できる範囲の優しさ』を育てていく流れ。"
      },
      {
        key: "rabbit",
        nameJa: "ウサギ",
        nameAlt: "Lamat",
        frontKeyword: "楽しみ／美／豊かさ",
        frontText:
          "推し・趣味・美味しいものなど『楽しいこと』に勢いがつく日。おしゃれや創作にも◎。お金や時間の使い方を、罪悪感ではなく『豊かさ』目線で選んでみて。",
        backText:
          "快楽に走りすぎて翌日ぐったり、のパターン注意。ノリだけで大きな散財をしないよう、上限ラインだけ決めておくと安心。",
        waveTheme:
          "喜びと豊かさの感度を上げる13日間。『自分にとってのご褒美とは？』を探るのにぴったり。"
      },
      {
        key: "water",
        nameJa: "水",
        nameAlt: "Muluk",
        frontKeyword: "感情／浄化／共感",
        frontText:
          "感情が動きやすく、涙腺もゆるみがちの日。映画・音楽・創作に触れると心のデトックスになる。水分補給＆お風呂で物理的な浄化も◎。",
        backText:
          "人の気持ちを受け取りすぎて、ぐったりしやすい。SNSやニュースの見すぎ注意。『今は自分の感情』にフォーカスしてあげて。",
        waveTheme:
          "感情の流れを浄化し、優しさの質を整える13日間。泣く・書く・話すで、詰まっていたものを流していく。"
      },
      {
        key: "dog",
        nameJa: "犬",
        nameAlt: "Ok",
        frontKeyword: "忠誠／仲間／愛情表現",
        frontText:
          "身近な人・大事な存在への愛情を思い出しやすい日。『ありがとう』を言葉や行動で伝えると関係が温まる。ペットやドールとの時間も◎。",
        backText:
          "好きだからこそのヤキモチや不安が出やすい。相手を試すような行動は控えめに。自分から『好き』を出したぶんだけ安心も増える日。",
        waveTheme:
          "仲間とのつながりを深め、信頼関係を育てる13日間。誰と群れ、誰と距離を置くかの再調整にもなる。"
      },
      {
        key: "monkey",
        nameJa: "サル",
        nameAlt: "Chuen",
        frontKeyword: "遊び心／創造／いたずら",
        frontText:
          "ユーモアとアイデアが湧きやすい日。『ちょっと変なこと』を試すと面白い発見がある。作業もゲーム感覚でやるとスイスイ進みそう。",
        backText:
          "悪ノリ・現実逃避に走りやすい。大事な約束を忘れないようにだけ注意。真面目な人ほど、今日はあえて『1割だけふざける』くらいでちょうどいい。",
        waveTheme:
          "遊び心と創造性を解放する13日間。作品づくり・企画・妄想をカタチにするのに最高のタイミング。"
      },
      {
        key: "road",
        nameJa: "道",
        nameAlt: "Eb",
        frontKeyword: "人生の道／日常／選択",
        frontText:
          "『これからどんな道を歩きたい？』を見直す日。日常の小さな選択（買い物・時間の使い方）が、未来のレールを静かに変えていくタイミング。",
        backText:
          "他人のペースに合わせすぎて、自分の道を見失いやすい。『これは誰の選択？』と自問すると、流されにくくなる。",
        waveTheme:
          "日常の習慣と人生の方向性をそろえていく13日間。ルーティンの微調整が、後の大きな分岐につながる。"
      },
      {
        key: "corn",
        nameJa: "コーン",
        nameAlt: "Ben",
        frontKeyword: "成長／家系／柱",
        frontText:
          "家族・血筋・ルーツを意識しやすい日。『自分という一本の柱』として、どう伸びたいかを考えると良き。背筋を伸ばして歩くと気持ちもシャキッとする。",
        backText:
          "家族や過去のパターンを無意識に繰り返しやすい。『親がこうだったから』で諦めず、自分なりのやり方を一つだけ試してみて。",
        waveTheme:
          "成長と自立を進める13日間。家族との関係を見直したり、自分の居場所を整える流れが出やすい。"
      },
      {
        key: "jaguar",
        nameJa: "ジャガー",
        nameAlt: "Ix",
        frontKeyword: "感性／霊性／領域",
        frontText:
          "勘が冴えやすく、空気を読む力もアップ。静かな場所・聖域っぽいところで過ごすと回復が早い。『ここから先は自分の領域』という線引きも大事になる日。",
        backText:
          "敏感すぎて疲れやすい。全部を察そうとせず、『今は知らなくていい情報』を意図的にスルーする練習を。",
        waveTheme:
          "感性とスピリチュアルな感覚をチューニングする13日間。お清め・儀式・祈りなど、自分なりのセレモニーを持つと安定する。"
      },
      {
        key: "eagle",
        nameJa: "ワシ",
        nameAlt: "Men",
        frontKeyword: "俯瞰／ビジョン／未来",
        frontText:
          "視野が広がりやすく、遠くのことを考えやすい日。長期計画・目標設定・スケジュール見直しに◎。高いところや広い景色を見ると頭が整理される。",
        backText:
          "理想が高くなりすぎて、今の自分を否定しがち。『今日は一歩だけ』を決めて、未来と現在をちゃんと橋渡ししてあげて。",
        waveTheme:
          "ビジョンを描き、広い視点から人生を眺める13日間。未来の地図をざっくり描いてみるのに良いタイミング。"
      },
      {
        key: "condor",
        nameJa: "コンドル",
        nameAlt: "Cib",
        frontKeyword: "知恵／祖先／内省",
        frontText:
          "歴史や神話、昔話などからヒントを得やすい日。過去の自分の失敗も、今日見ると『知恵のストック』に変わりやすい。静かな作業や読書に◎。",
        backText:
          "反省が行きすぎて自己否定モードになりがち。『ダメだった』で終わらせず、『じゃあ次はどうする？』までセットで考えること。",
        waveTheme:
          "知恵と経験を整理し、次の世代（未来の自分）に渡す13日間。学びのまとめやアーカイブ作りにも向く。"
      },
      {
        key: "earth",
        nameJa: "香",
        nameAlt: "Caban / Earth",
        frontKeyword: "大地／リズム／シンクロ",
        frontText:
          "地に足をつけること・自然のリズムに合わせることがポイントの日。散歩・土いじり・観葉植物の世話など、現実の大地に触れると整いやすい。",
        backText:
          "頭で考えすぎて、体のリズムを無視しがち。『今日はゆっくりでいい』という日にはちゃんとブレーキを。シンクロを急いで求めないこと。",
        waveTheme:
          "人生のリズムを整え、シンクロと共鳴しやすくなる13日間。自然・季節・体調のサイクルを意識すると、流れに乗りやすい。"
      },
      {
        key: "knife",
        nameJa: "ナイフ",
        nameAlt: "Etznab",
        frontKeyword: "決断／カット／真実",
        frontText:
          "『残すもの』と『やめるもの』を切り分けるのに向く日。曖昧だったテーマにハサミを入れて、スッキリさせる動きが出やすい。",
        backText:
          "言葉や行動が鋭くなりやすく、人を傷つけてしまうことも。相手ではなく『状態・仕組み』を切るイメージで、人そのものは切り捨てないように。",
        waveTheme:
          "選択と決断の13日間。環境・人間関係・持ち物などをシビアに見直すタイミング。ただし切りすぎ注意。"
      },
      {
        key: "storm",
        nameJa: "嵐",
        nameAlt: "Cauac",
        frontKeyword: "浄化／変容／感情の爆発",
        frontText:
          "感情や出来事がドッと動きやすい日。良くも悪くも『揺れる』ことで、要らないものが洗い流されるタイミング。気圧と頭痛にはご用心。",
        backText:
          "勢いで全部壊したくなる衝動に注意。ケンカや衝突も起こりやすいので、『今日は感情が荒れやすい日』と知っておくだけでも冷静になれる。",
        waveTheme:
          "大きな浄化と変容の13日間。感情の嵐のあとに、新しい景色が見えてくるフェーズ。しがみついているものほど手放し候補。"
      },
      {
        key: "ancestor",
        nameJa: "祖先",
        nameAlt: "Ahau / Sun",
        frontKeyword: "完成／光／祝福",
        frontText:
          "一区切り・達成・完成を意識しやすい日。これまでやってきたことに光が当たりやすい。自分をねぎらう時間をしっかり取ると次のサイクルの燃料になる。",
        backText:
          "『ここまで来たのにまだ足りない』と、終わりを認められないループに注意。今日は結果よりも、『ここまで頑張った自分』を祝う日。",
        waveTheme:
          "ひとつの物語が完結し、次の章へバトンタッチする13日間。感謝・お祝い・振り返りにぴったり。"
      }
    ];

    // 13の音
    const tones = [
      {
        num: 1,
        name: "音1",
        keyword: "始まり・目的",
        front:
          "大きな方向性やテーマをざっくり決める日。完璧な計画より『こんな感じで行きたい』を言葉にしてみると◎。",
        back:
          "全部一気に決めようとして疲れやすい。今日は『仮決定』で十分、とゆるく構えて。"
      },
      {
        num: 2,
        name: "音2",
        keyword: "分かれる・比較",
        front:
          "AかBか、二択を見直すタイミング。長所短所をメモに出して眺めると冷静に選びやすい。",
        back:
          "比べすぎて自己否定に陥りやすい日。『ジャッジ』ではなく『違いを観察』くらいでちょうどいい。"
      },
      {
        num: 3,
        name: "音3",
        keyword: "動き出す・交流",
        front:
          "ちょっと動いてみる・人に話してみることで流れがつきやすい日。完璧じゃなくていいから、試運転してみよう。",
        back:
          "やることを増やしすぎて散らかりやすい。行動は3つまでに絞ると扱いやすい。"
      },
      {
        num: 4,
        name: "音4",
        keyword: "形・仕組み",
        front:
          "ルールや仕組みを整えるのに向く日。テンプレ・チェックリスト・フォーマットづくりがはかどるタイミング。",
        back:
          "ルールで自分を縛りすぎないよう注意。『いったん試すルール』として軽く扱うと吉。"
      },
      {
        num: 5,
        name: "音5",
        keyword: "中心・テコ入れ",
        front:
          "今の流れの『中心』にエネルギーを注ぐ日。道具を新調したり、体のメンテナンスをするのに◎。",
        back:
          "あれもこれも一度にテコ入れしようとして疲れがち。今日は一番大事なものだけでOK。"
      },
      {
        num: 6,
        name: "音6",
        keyword: "バランス・調整",
        front:
          "仕事・休み・趣味などのバランスを微調整する日。少しペース配分を変えるだけでも効果が出やすい。",
        back:
          "人の都合を優先しすぎて、自分が後回しになりやすい。『自分のための時間』もちゃんと予定に入れて。"
      },
      {
        num: 7,
        name: "音7",
        keyword: "振り返り・さかい目",
        front:
          "ここまでの流れを一度振り返るタイミング。進みを止めて俯瞰すると、次の一手が見えやすい。",
        back:
          "ネガティブな出来事だけを拡大して見てしまいがち。良かったことも3つ書き出すとバランスが戻る。"
      },
      {
        num: 8,
        name: "音8",
        keyword: "整える・洗練",
        front:
          "クオリティアップの日。やり方を少し改善したり、仕上げを丁寧にすると一段と光る。",
        back:
          "完璧主義が顔を出しやすい。『今日は8割でOK』と決めておくと、手が止まりにくい。"
      },
      {
        num: 9,
        name: "音9",
        keyword: "まとめ・広がり",
        front:
          "今のテーマを一つ上の視点からまとめる日。成果を発信したり、人に共有するのに向く。",
        back:
          "やることを詰め込みすぎてパンクしやすい。今日は『広げる』より『要点を絞って伝える』意識で。"
      },
      {
        num: 10,
        name: "音10",
        keyword: "形になる・具体化",
        front:
          "目に見える形・数字として結果が出やすい日。小さくても『できたこと』を数えてあげると自己肯定感アップ。",
        back:
          "結果が全て、と思い込みやすい。過程で得たスキルやつながりも、ちゃんと評価してあげて。"
      },
      {
        num: 11,
        name: "音11",
        keyword: "削ぎ落とし・解放",
        front:
          "余分なものをそぎ落として、シンプルにする日。やめる・減らす・任せるを考えるとスッキリ。",
        back:
          "勢いで大事なものまで手放したくなることも。『本当にいらない？』を一度確認してからバッサリいこう。"
      },
      {
        num: 12,
        name: "音12",
        keyword: "共有・つながり",
        front:
          "人と分かち合うことで学びが深まる日。相談・報告・雑談も含めて、『しゃべる』時間を少し増やすと◎。",
        back:
          "人の価値観を集めすぎて、自分の軸がボヤけやすい。最後は自分で決める前提で話を聞こう。"
      },
      {
        num: 13,
        name: "音13",
        keyword: "手放し・次へのジャンプ",
        front:
          "一つのサイクルの締めくくり。感謝して手放し、次の流れに飛び乗る準備をする日。『ここまでよくやった』と自分を労うことが大切。",
        back:
          "終わらせるのが怖くて、わざと引き延ばしたくなることも。小さくていいので『完了』を一つ作ってみよう。"
      }
    ];

    const weekdays = ["日", "月", "火", "水", "木", "金", "土"];

    // 基準日：2025-12-10 = 音9・香（Earth）
    const baseDate = new Date(2025, 11, 10); // 月は0始まりなので 11 = 12月
    const baseTone = 9;
    const baseSignIndex = 16; // ワニ=0 〜 祖先=19 のうち「香」は17番目 → index16

    function mod(n, m) {
      return ((n % m) + m) % m;
    }

    function getMayanFor(date) {
      const d = new Date(date.getFullYear(), date.getMonth(), date.getDate());
      const diffDays = Math.round(
        (d.getTime() - baseDate.getTime()) / (1000 * 60 * 60 * 24)
      );

      const toneIndex = mod(baseTone - 1 + diffDays, 13);
      const tone = tones[toneIndex];

      const signIndex = mod(baseSignIndex + diffDays, 20);
      const sign = daySigns[signIndex];

      return { diffDays, tone, sign, signIndex };
    }

    function getWavespell(date, tone, signIndex) {
      const offset = tone.num - 1; // そのウェイブスペルの中で何日目か
      const startDate = new Date(
        date.getFullYear(),
        date.getMonth(),
        date.getDate() - offset
      );
      const startSignIndex = mod(signIndex - offset, 20);
      const startSign = daySigns[startSignIndex];

      return { startDate, startSign, startSignIndex };
    }

    function formatDateJa(date) {
      const y = date.getFullYear();
      const m = date.getMonth() + 1;
      const d = date.getDate();
      const w = weekdays[date.getDay()];
      return `${y}年${m}月${d}日（${w}）`;
    }

    // ★誕生日検索
    function handleBirthSearch() {
      const inputEl = document.getElementById("birthInput");
      const introEl = document.getElementById("birthResultIntro");
      const mainEl = document.getElementById("birthResultMain");
      const hintEl = document.getElementById("birthResultHint");

      if (!inputEl.value) {
        introEl.textContent = "誕生日を選んでから『検索』を押してね。";
        mainEl.textContent = "";
        hintEl.textContent = "";
        return;
      }

      const date = new Date(inputEl.value); // ローカル日時でOK
      const { tone, sign } = getMayanFor(date);
      const label = formatDateJa(date);

      introEl.textContent = `${label} 生まれのあなたは…`;
      mainEl.textContent =
        `【基本の組み合わせ】\n` +
        `音${tone.num}・${sign.nameJa}（${sign.nameAlt}）\n\n` +
        `【紋章のテーマ】\n${sign.frontText}\n\n` +
        `【本能・裏側で出やすいクセ】\n${sign.backText}\n\n` +
        `【音${tone.num}のリズム】\n${tone.front}\n\n` +
        `【音${tone.num}のクセ】\n${tone.back}`;

      hintEl.textContent = `★キーワード：${sign.frontKeyword}／音${tone.num}「${tone.keyword}」`;
    }

    function init() {
      const today = new Date();
      document.getElementById("todayLabel").textContent = formatDateJa(today);

      const { tone, sign, signIndex } = getMayanFor(today);
      const wave = getWavespell(today, tone, signIndex);

      // 上のピル
      document.getElementById(
        "kinLabel"
      ).textContent = `音${tone.num}・${sign.nameJa}の日`;
      document.getElementById(
        "wavespellLabel"
      ).textContent = `今の13日間：音1・${wave.startSign.nameJa}から`;

      // 表（人側）
      document.getElementById("frontDayName").textContent =
        `音${tone.num}・${sign.nameJa}の日`;
      document.getElementById("frontToneSign").innerHTML =
        `<span><strong>${tone.name}</strong>：${tone.keyword}</span>` +
        `<span><strong>${sign.nameJa}</strong>（${sign.nameAlt}）</span>`;
      document.getElementById("frontText").textContent = `${
        sign.frontText
      }\n\n【音${tone.num}の流れ】${tone.front}`;
      document.getElementById(
        "frontHint"
      ).textContent = `★キーワード：${sign.frontKeyword}`;

      // 裏（神側）
      document.getElementById("backDayName").textContent =
        `音${tone.num}・${sign.nameJa}の日`;
      document.getElementById("backToneSign").innerHTML =
        `<span><strong>${tone.name}</strong>：${tone.keyword}</span>` +
        `<span><strong>${sign.nameJa}</strong>の本能面</span>`;
      document.getElementById("backText").textContent = `${
        sign.backText
      }\n\n【音${tone.num}のクセ】${tone.back}`;
      document.getElementById(
        "backHint"
      ).textContent = "★『出やすいパターン』を知っておくだけでも十分ケアになる日。";

      // 13日間
      const startLabel = formatDateJa(wave.startDate);
      document.getElementById(
        "waveTitle"
      ).textContent = `音1・${wave.startSign.nameJa} から始まる13日間`;
      const endDate = new Date(
        wave.startDate.getFullYear(),
        wave.startDate.getMonth(),
        wave.startDate.getDate() + 12
      );
      document.getElementById("waveRange").textContent = `${startLabel} 〜 ${formatDateJa(
        endDate
      )}`;
      document.getElementById("waveText").textContent = wave.startSign.waveTheme;
      document.getElementById(
        "waveHint"
      ).textContent = "★今日がこの13日間の中で何日目かは『音』を見ると分かるよ。";
    }

    init();
  </script>
</body>
</html>
