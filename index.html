<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>Uroko Calendar</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      --bg: #f4ecdf;
      --card-bg: #fff7ec;
      --accent: #d3a76a;
      --accent-soft: #f0d8ac;
      --text-main: #4b3a28;
      --text-sub: #7b6750;
      --badge-bg: #f5e3c6;
      --badge-text: #947246;
      --shadow-soft: 0 10px 25px rgba(0,0,0,0.07);
      --radius-lg: 18px;
      --radius-md: 12px;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, "Helvetica Neue",
        "YuGothic", "Yu Gothic", "Hiragino Sans", "Hiragino Kaku Gothic ProN",
        "Meiryo", sans-serif;
      background: var(--bg);
      color: var(--text-main);
      padding: 20px 12px 40px;
    }

    .app-container {
      max-width: 720px;
      margin: 0 auto;
    }

    header {
      text-align: center;
      margin-bottom: 18px;
    }

    header h1 {
      font-size: 26px;
      letter-spacing: 0.16em;
      margin-bottom: 4px;
    }

    header .date {
      font-size: 14px;
      color: var(--text-sub);
      margin-bottom: 8px;
    }

    header .chip-row {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 6px;
      font-size: 12px;
    }

    .chip {
      padding: 4px 10px;
      border-radius: 999px;
      background: rgba(255,255,255,0.8);
      color: var(--text-sub);
      border: 1px solid rgba(0,0,0,0.04);
    }

    .card {
      background: var(--card-bg);
      border-radius: var(--radius-lg);
      box-shadow: var(--shadow-soft);
      padding: 16px 18px 18px;
      margin-bottom: 16px;
    }

    .card-title-row {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      margin-bottom: 8px;
      gap: 8px;
    }

    .card-title {
      font-size: 18px;
      font-weight: 600;
    }

    .badge {
      font-size: 11px;
      padding: 3px 8px;
      background: var(--badge-bg);
      color: var(--badge-text);
      border-radius: 999px;
      white-space: nowrap;
    }

    .card-subtitle {
      font-size: 13px;
      color: var(--text-sub);
      margin-bottom: 8px;
    }

    .today-main {
      font-size: 14px;
      line-height: 1.8;
      margin-bottom: 10px;
    }

    .today-meta {
      font-size: 13px;
      color: var(--text-sub);
      line-height: 1.7;
    }

    .today-keywords {
      font-size: 12px;
      margin-top: 6px;
      color: var(--text-sub);
    }

    .today-keywords span {
      margin-right: 6px;
    }

    .small-note {
      font-size: 11px;
      color: var(--text-sub);
      margin-top: 6px;
    }

    .section-title {
      font-size: 16px;
      font-weight: 600;
      margin-bottom: 8px;
    }

    .section-text {
      font-size: 13px;
      line-height: 1.8;
      color: var(--text-main);
      margin-bottom: 4px;
    }

    .section-list {
      font-size: 13px;
      color: var(--text-main);
      padding-left: 1.1em;
      margin: 6px 0;
    }

    .section-list li {
      margin-bottom: 2px;
    }

    .birth-form {
      display: flex;
      flex-wrap: nowrap;
      gap: 6px;
      margin: 10px 0;
    }

    .birth-form input {
      width: 30%;
      padding: 6px 8px;
      border-radius: 999px;
      border: 1px solid #e0cda8;
      font-size: 13px;
      text-align: center;
    }

    .birth-form button {
      flex: 0 0 auto;
      padding: 6px 12px;
      border-radius: 999px;
      border: none;
      background: var(--accent);
      color: #fff;
      font-size: 13px;
    }

    .birth-result-title {
      font-size: 14px;
      font-weight: 600;
      margin-top: 6px;
      margin-bottom: 2px;
    }

    .birth-result-text {
      font-size: 13px;
      line-height: 1.7;
      color: var(--text-main);
      margin-bottom: 4px;
    }

    .footer-note {
      font-size: 11px;
      color: var(--text-sub);
      text-align: center;
      margin-top: 8px;
    }

    @media (min-width: 600px) {
      body {
        padding: 32px 16px 48px;
      }
      header h1 {
        font-size: 28px;
      }
      .card {
        padding: 18px 22px 20px;
      }
    }
  </style>
</head>
<body>
  <div class="app-container">
    <header>
      <h1>Uroko Calendar</h1>
      <div class="date" id="today-date"></div>
      <div class="chip-row">
        <div class="chip" id="today-chip-main"></div>
        <div class="chip" id="today-chip-wave"></div>
      </div>
    </header>

    <!-- 今日の表 -->
    <section class="card">
      <div class="card-title-row">
        <div class="card-title">今日の表</div>
        <div class="badge">表で動きやすいテーマ</div>
      </div>
      <div class="card-subtitle" id="today-front-heading"></div>
      <div class="today-main" id="today-front-main"></div>
      <div class="today-meta" id="today-front-flow"></div>
      <div class="today-keywords" id="today-front-keywords"></div>
    </section>

    <!-- 今日の裏 -->
    <section class="card">
      <div class="card-title-row">
        <div class="card-title">今日の裏</div>
        <div class="badge">本能・影で動きやすいところ</div>
      </div>
      <div class="card-subtitle" id="today-back-heading"></div>
      <div class="today-main" id="today-back-main"></div>
      <div class="today-meta" id="today-back-flow"></div>
      <div class="today-keywords" id="today-back-keywords"></div>
      <div class="small-note">※「出やすいパターン」を知っておくだけでも、かなりケアしやすくなる日。</div>
    </section>

    <!-- いま流れている13日間 -->
    <section class="card">
      <div class="card-title-row">
        <div class="card-title">いま流れている13日間</div>
        <div class="badge">ウェイブスペル</div>
      </div>
      <div class="card-subtitle" id="wave-title"></div>
      <div class="today-main" id="wave-period"></div>
      <div class="today-meta" id="wave-desc"></div>
      <div class="small-note">※ 今日がこの13日間の中で何日目かは「音」を見ると分かるよ。</div>
    </section>

    <!-- 音と紋章について -->
    <section class="card">
      <div class="card-title-row">
        <div class="card-title">音と紋章について</div>
        <div class="badge">ざっくり解説</div>
      </div>
      <div class="section-text">
        マヤ暦（ツォルキン）は、13の「音」と20の「紋章」の組み合わせで、日ごとの雰囲気や流れを見ていく暦やで。
      </div>
      <ul class="section-list">
        <li>音 … その日の「リズム」や「進み具合」。1〜13まであって、はじまり／調整／手放し…みたいな流れがくり返される。</li>
        <li>紋章 … その日の「テーマ」や「キャラ」。ワニ・風・夜・トカゲ…みたいに20種類あって、それぞれ得意分野とクセがある。</li>
      </ul>
      <div class="section-text">
        このアプリでは「表＝意識しやすい動き」「裏＝本能や影で出やすい動き」として、同じ日を両側からメモしてる感じやと思ってくれたらOK。
      </div>
      <div class="small-note">
        ※「神様がいる人用」じゃなくて、誰にでも出やすい本能の動きとして見れるようにしてあるで。
      </div>
    </section>

    <!-- 誕生日検索 -->
    <section class="card">
      <div class="card-title-row">
        <div class="card-title">あなたのマヤ暦をしらべる</div>
        <div class="badge">誕生日検索</div>
      </div>
      <div class="section-text">
        西暦の誕生日を入れると、「音」と「紋章」と、そのざっくりした性質が出てくるよ。
      </div>
      <div class="birth-form">
        <input type="number" id="birth-year" placeholder="YYYY" />
        <input type="number" id="birth-month" placeholder="MM" />
        <input type="number" id="birth-day" placeholder="DD" />
        <button id="birth-search">検索</button>
      </div>
      <div id="birth-result"></div>
      <div class="footer-note">
        ＊ しらの専用マヤ暦メモアプリ（試作版） / 日付から表と裏のメモ＆誕生日の傾向をベオが自動で出してます。
      </div>
    </section>
  </div>

  <script>
    // ---- 設定：ツォルキンの基準日 ---------------------------------
    // 2025-12-11 が「音4・死」の日になるようにする
    const BASE_DATE = new Date("2025-12-11T00:00:00");
    const BASE_TONE = 4;          // 音4
    const BASE_SIGN_INDEX = 5;    // 0:ワニ〜 5:死

    const signList = [
      "ワニ", "風", "夜", "トカゲ", "蛇",
      "死", "シカ", "ウサギ", "水", "犬",
      "サル", "道", "コーン", "ジャガー", "ワシ",
      "コンドル", "香", "ナイフ", "嵐", "祖先"
    ];

    const signKeywords = {
      "ワニ": "はじまり／安心感／土台／母性",
      "風": "言葉／コミュニケーション／情報／呼吸",
      "夜": "内面世界／夢／潜在意識／安心できる闇",
      "トカゲ": "種／才能の芽／欲望／好奇心",
      "蛇": "生命エネルギー／カラダ／情熱／直感",
      "死": "手放し／区切り／再生／変容",
      "シカ": "献身／サポート／職人力／癒し",
      "ウサギ": "楽しみ／美／豊かさ／遊び心",
      "水": "感情／浄化／共感／流れ",
      "犬": "仲間／家族／忠誠心／愛情表現",
      "サル": "遊び心／創造力／ユーモア",
      "道": "人生の道／日常／選択／習慣",
      "コーン": "成長／家族・ルーツ／柱／拠点",
      "ジャガー": "感性／霊性／聖域／領域",
      "ワシ": "俯瞰／ビジョン／未来／戦略",
      "コンドル": "知恵／祖先／学び／歴史",
      "香": "大地／リズム／シンクロ／現実感",
      "ナイフ": "決断／カット／真実／クリア",
      "嵐": "浄化／変容／感情の爆発／ブレイクスルー",
      "祖先": "完成／光／祝福／統合"
    };

    const signShort = {
      "ワニ": "はじまりの種を守る「巣づくり名人」。安心できる場づくりが得意。",
      "風": "言葉と情報のメッセンジャー。会話・発信・ツッコミ担当。",
      "夜": "内面と夢の探検家。一人時間と静かな世界がエネルギー源。",
      "トカゲ": "才能と欲望の“種”を見つけるプロ。変身と成長の人。",
      "蛇": "カラダと情熱で動く生命エネルギー担当。体感・直感タイプ。",
      "死": "終わりと始まりの区切り係。手放しと再スタートの達人。",
      "シカ": "献身と職人力で守るヒーラー。人のために動ける守護者。",
      "ウサギ": "楽しさと美を増やすムードメーカー。推し活・趣味活の星。",
      "水": "感情のヒーラー。泣く・笑うを通して心を洗い流す人。",
      "犬": "群れと絆を守る相棒。家族・仲間・ペット愛が深い。",
      "サル": "遊びと創造のトリックスター。ふざけながら本質をつく天才。",
      "道": "日常の選択ナビゲーター。実務とスピをつなぐ橋渡し役。",
      "コーン": "家と拠点の柱ポジション。ルーツと次世代をつなぐ人。",
      "ジャガー": "聖域の番人。感性と霊感で場の気配を読むシャーマン。",
      "ワシ": "高いところから未来を見るプランナー。ビジョン担当。",
      "コンドル": "経験を知恵に変える学びの人。振り返りと教える力。",
      "香": "大地リズムのチューナー。ペースとシンクロを整える役。",
      "ナイフ": "真実を切り出す外科医タイプ。要る／要らないをクリアに。",
      "嵐": "停滞を一気に洗い流す大浄化係。変化とブレイクスルー担当。",
      "祖先": "物語をまとめて次へ渡す太陽。完成と祝福のエネルギー。"
    };

    const toneNames = {
      1: "はじまり",
      2: "バランス",
      3: "動き出し",
      4: "形・仕組み",
      5: "中心・テコ入れ",
      6: "流れに乗る",
      7: "俯瞰・調整",
      8: "整える・与える",
      9: "意図・つながり",
      10: "成果・具現化",
      11: "手放し・削ぎ落とし",
      12: "共有・相談",
      13: "次元上昇・切り替え"
    };

    const toneFront = {
      1: "新しいサイクルのスタート。「とりあえずやってみる」が合言葉。完璧より着手優先。",
      2: "あっちこっちに揺れやすい日。2択・バランス・調整ごとに吉。白黒よりグレーを許す。",
      3: "用事や連絡が増えやすい動きの多い日。人とのやりとりがヒントを運んでくる。",
      4: "ルールや仕組みを整えるのに向く日。テンプレ・チェックリスト・フォーマットづくりがはかどりやすい。",
      5: "「ここだけは」が浮き上がる日。エネルギーを一点集中するとテコ入れが効く。",
      6: "流れに乗る・習慣に乗る日。本調子に戻すイメージで、無理なく続けられる形を探す。",
      7: "俯瞰して全体を見る日。細部よりもバランスや配置を眺めるとヒントが出てくる。",
      8: "与える・整えるエネルギー。誰かや場のために動くことで、自分の軸も整いやすい。",
      9: "意図とご縁が動く日。「何のために？」を見直すと流れが整いやすい。",
      10: "成果・形になりやすい日。小さなゴールでも「ここまでできた」をちゃんと見る。",
      11: "いらないものを手放す日。削ぎ落とし・整理・キャンセル処理に◎。",
      12: "相談・共有・雑談がカギの日。一人で抱えず、人と話すことで整理される。",
      13: "サイクルの切り替え日。終わりと次のステージの入口が同時に開くタイミング。"
    };

    const toneBack = {
      1: "スタートダッシュしすぎて息切れ注意。全部を一度に始めようとしない。",
      2: "優柔不断・迷いすぎモードに入りやすい。「今日は仮の答え」でOK。",
      3: "あれこれ手を出しすぎて散らかりやすい。投げっぱなし案件に注意。",
      4: "自分を縛るルールも強まりがち。「暫定版」として軽く扱おう。",
      5: "一点にこだわりすぎて他が見えなくなるかも。身体のケアも忘れずに。",
      6: "勢いで流されすぎ注意。「まあいっか」で抱え込みすぎないように。",
      7: "考えすぎ・分析しすぎモードに入りやすい。頭より体を動かして整える。",
      8: "与えすぎて疲れやすい日。「今日はここまで」と線を引く意識を。",
      9: "理想が暴走してプレッシャーになりがち。今できる一歩に戻る。",
      10: "結果の出来栄えにこだわりすぎると疲れる。プロセスもちゃんと評価して。",
      11: "全部切り捨てたくなる極端モード注意。感情で決めず、候補をメモするだけでも◎。",
      12: "人の意見を聞きすぎて自分を見失いやすい。最後の一押しは自分の感覚で。",
      13: "一気に全部変えたくなる衝動注意。壊すより「次への引き継ぎ」を意識して。"
    };

    const toneKeywords = {
      1: "スタート／着手／種まき",
      2: "バランス／比較／ゆらぎ",
      3: "交流／動き／連絡",
      4: "形づくり／ルール／仕組み",
      5: "集中／テコ入れ／コア",
      6: "流れ／ペース／習慣",
      7: "俯瞰／調整／配置",
      8: "整える／与える／サポート",
      9: "意図／ご縁／願い",
      10: "成果／到達／実り",
      11: "手放し／削ぎ落とし／解放",
      12: "共有／相談／チーム",
      13: "切り替え／飛躍／次元アップ"
    };

    function formatDateJP(date) {
      const y = date.getFullYear();
      const m = date.getMonth() + 1;
      const d = date.getDate();
      const weekday = ["日", "月", "火", "水", "木", "金", "土"][date.getDay()];
      return `${y}年${m}月${d}日（${weekday}）`;
    }

    function getTzolkin(date) {
      const oneDay = 24 * 60 * 60 * 1000;
      const diffDays = Math.round((date - BASE_DATE) / oneDay);

      // 音
      let tone = ((BASE_TONE - 1 + diffDays) % 13 + 13) % 13 + 1;
      // 紋章
      let signIndex = ((BASE_SIGN_INDEX + diffDays) % 20 + 20) % 20;
      const signName = signList[signIndex];

      return { tone, signIndex, signName };
    }

    function getWaveInfo(date, tz) {
      // 今の音から、ウェイブスペルの1日目（音1）の日を出す
      const start = new Date(date.getTime() - (tz.tone - 1) * 24 * 60 * 60 * 1000);
      const end = new Date(start.getTime() + 12 * 24 * 60 * 60 * 1000);
      const startTz = getTzolkin(start);
      const waveName = `${startTz.signName}の13日間`;
      return { start, end, waveName, startTz };
    }

    function fillToday() {
      const today = new Date();
      const tz = getTzolkin(today);
      const wave = getWaveInfo(today, tz);

      document.getElementById("today-date").textContent = formatDateJP(today);
      document.getElementById("today-chip-main").textContent =
        `音${tz.tone}・${tz.signName}の日`;
      document.getElementById("today-chip-wave").textContent =
        `今の13日間：${wave.waveName}`;

      const toneName = toneNames[tz.tone];

      // 表
      document.getElementById("today-front-heading").textContent =
        `音${tz.tone}：${toneName}　${tz.signName}の日`;
      document.getElementById("today-front-main").textContent =
        toneFront[tz.tone];
      document.getElementById("today-front-flow").textContent =
        `【音${tz.tone}の流れ】 ${toneFront[tz.tone]}`;
      document.getElementById("today-front-keywords").textContent =
        `★キーワード：${toneKeywords[tz.tone]}`;

      // 裏
      document.getElementById("today-back-heading").textContent =
        `音${tz.tone}：${toneName}　${tz.signName}の本能面`;
      document.getElementById("today-back-main").textContent =
        toneBack[tz.tone];
      document.getElementById("today-back-flow").textContent =
        `【音${tz.tone}のクセ】 ${toneBack[tz.tone]}`;
      document.getElementById("today-back-keywords").textContent =
        `★出やすいパターン：${toneKeywords[tz.tone]}`;

      // 13日間
      const s = wave.start;
      const e = wave.end;
      const waveTitle = `音1・${wave.startTz.signName}から始まる13日間`;
      document.getElementById("wave-title").textContent = waveTitle;
      document.getElementById("wave-period").textContent =
        `${s.getFullYear()}年${s.getMonth() + 1}月${s.getDate()}日（月） 〜 ` +
        `${e.getFullYear()}年${e.getMonth() + 1}月${e.getDate()}日（土）`;
      document.getElementById("wave-desc").textContent =
        `${wave.waveName}。感情や出来事を通じて、大きな浄化と変容が起こりやすい期間。` +
        `「いらないものを洗い流す」と思って、自分にとって安心なペースを大事にしてな。`;
    }

    function handleBirthSearch() {
      const y = parseInt(document.getElementById("birth-year").value, 10);
      const m = parseInt(document.getElementById("birth-month").value, 10);
      const d = parseInt(document.getElementById("birth-day").value, 10);
      const resultEl = document.getElementById("birth-result");

      if (!y || !m || !d) {
        resultEl.innerHTML =
          '<div class="birth-result-text">年・月・日を全部入れてな。</div>';
        return;
      }

      const birth = new Date(y, m - 1, d);
      if (isNaN(birth.getTime())) {
        resultEl.innerHTML =
          '<div class="birth-result-text">日付がおかしいかも。もう一度確認してみて。</div>';
        return;
      }

      const tz = getTzolkin(birth);

      const sign = tz.signName;
      const tone = tz.tone;

      const html = `
        <div class="birth-result-title">◎ ${y}年${m}月${d}日 生まれのメモ</div>
        <div class="birth-result-text">
          ◆ あなたの紋章：<b>${sign}</b><br>
          ・キーワード：${signKeywords[sign]}<br>
          ・ざっくり性質：${signShort[sign]}
        </div>
        <div class="birth-result-text">
          ◆ あなたの音：<b>音${tone}（${toneNames[tone]}）</b><br>
          ・キーワード：${toneKeywords[tone]}<br>
          ・表のテーマ：${toneFront[tone]}<br>
          ・裏で出やすいクセ：${toneBack[tone]}
        </div>
        <div class="small-note">
          ※ 紋章＝キャラ設定、音＝動き方のクセ、みたいな感じで読んでな。
        </div>
      `;
      resultEl.innerHTML = html;
    }

    fillToday();
    document.getElementById("birth-search")
      .addEventListener("click", handleBirthSearch);
  </script>
</body>
</html>